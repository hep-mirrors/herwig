##################################################
# Rivet analyses at the Z pole
##################################################
read LHCBase-Powheg.in

##################################################
#  Use the q qbar matrix element
##################################################
cd /Herwig/MatrixElements
# ZZ
insert SimpleQCD:MatrixElements[0] PowhegMEPP2VV
set PowhegMEPP2VV:Process ZZ

do /Herwig/Particles/Z0:SelectDecayModes /Herwig/Particles/Z0/Z0->e-,e+; /Herwig/Particles/Z0/Z0->mu-,mu+; /Herwig/Particles/Z0/Z0->tau-,tau+; /Herwig/Particles/Z0/Z0->nu_e,nu_ebar; /Herwig/Particles/Z0/Z0->nu_mu,nu_mubar; /Herwig/Particles/Z0/Z0->nu_tau,nu_taubar;

# No QED radiation
erase /Herwig/EventHandlers/LHCHandler:PostSubProcessHandlers 0

##################################################
# select the analyses
##################################################

# general analysis
insert /Herwig/Analysis/RivetAnalysis:Analyses 0 ATLAS_2012_I1203852

# put BR's into cross section
create Herwig::BranchingRatioReweighter /Herwig/Generators/BRReweighter
insert /Herwig/EventHandlers/LHCHandler:PostHadronizationHandlers 0 /Herwig/Generators/BRReweighter

##################################################
# Save run for later usage with 'Herwig++ run'
##################################################
cd /Herwig/Generators
saverun LHC-Powheg-ZZ-lv LHCGenerator
