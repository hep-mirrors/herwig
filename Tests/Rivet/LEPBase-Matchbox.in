##################################################
# base parameters for LEP analyses
##################################################

##################################################
# Technical parameters for this run
##################################################
cd /Herwig/Generators
set LEPGenerator:NumberOfEvents 100000000
set LEPGenerator:RandomNumberGenerator:Seed 31122001
set LEPGenerator:PrintEvent 10
set LEPGenerator:MaxErrors 10000

cd /Herwig/EventHandlers
set LEPHandler:Weighted Off
set LEPHandler:Sampler  /Herwig/Samplers/Sampler
set LEPHandler:CascadeHandler:MPIHandler NULL

cd /Herwig/MatrixElements/Matchbox
insert /Herwig/Generators/LEPGenerator:EventHandler:SubProcessHandlers[0] EEFactory

##################################################
#  Switch off ISR
##################################################
set /Herwig/Particles/e-:PDF /Herwig/Partons/NoPDF
set /Herwig/Particles/e+:PDF /Herwig/Partons/NoPDF

##################################################
#  Create the matchbox process
##################################################

## Set the order of the couplings
cd /Herwig/MatrixElements/Matchbox
set EEFactory:OrderInAlphaS 0
set EEFactory:OrderInAlphaEW 2

## Select the process
## You may use identifiers such as p, pbar, j, l, mu+, h0 etc.
do EEFactory:Process e- e+ j j

set /Herwig/Cuts/MatchboxJetMatcher:Factory /Herwig/MatrixElements/Matchbox/EEFactory

##################################################
## Cleanup
##################################################

## Change only if you know what you are doing.
## For the moment, we only deal with massless partons
cd /Herwig/Particles
set d:NominalMass 0*GeV
set dbar:NominalMass 0*GeV
set u:NominalMass 0*GeV
set ubar:NominalMass 0*GeV
set s:NominalMass 0*GeV
set sbar:NominalMass 0*GeV
set c:NominalMass 0*GeV
set cbar:NominalMass 0*GeV
set b:NominalMass 0*GeV
set bbar:NominalMass 0*GeV
set /Herwig/Cuts/JetKtCut:MinKT 0.0*GeV
set /Herwig/Generators/LEPGenerator:EventHandler:CollisionCuts Off
##################################################
## Matching
##################################################
cd /Herwig/MatrixElements/Matchbox

## MC@NLO-type next-to-leading order for use with default shower

set EEFactory:ShowerApproximation QTildeMatching
set /Herwig/Shower/Evolver:HardVetoScaleSource Read
set /Herwig/Shower/Evolver:MECorrMode No



## Matching scale variation for MEMatching
## - other scale factors are deduced from the shower handlers
set MEMatching:RenormalizationScaleFactor 1.0
set MEMatching:FactorizationScaleFactor 1.0

set /Herwig/Shower/ShowerHandler:RenormalizationScaleFactor 1.0
set /Herwig/Shower/ShowerHandler:FactorizationScaleFactor 1.0
set /Herwig/Shower/ShowerHandler:HardScaleFactor 1.0

## Hard process scale variation
set EEFactory:RenormalizationScaleFactor 1.0
set EEFactory:FactorizationScaleFactor 1.0

## Scale choice
set EEFactory:ScaleChoice /Herwig/MatrixElements/Matchbox/Scales/FixedScale

do /Herwig/MatrixElements/Matchbox/EEFactory:ProductionMode

##################################################
#  Create the Herwig analysis
##################################################
create ThePEG::RivetAnalysis /Herwig/Analysis/RivetAnalysis RivetAnalysis.so
insert /Herwig/Generators/LEPGenerator:AnalysisHandlers 0 /Herwig/Analysis/RivetAnalysis






























# ## POWHEG-type next-to-leading order

# # set EEFactory:ShowerApproximation MEMatching
# # set MECorrectionHandler:Factory EEFactory
# # cd /Herwig/Generators
# # insert LEPGenerator:EventHandler:PostSubProcessHandlers[0] /Herwig/MatrixElements/Matchbox/MECorrectionHandler

# ##################################################
# ## Scales variations
# ##################################################
# cd /Herwig/MatrixElements/Matchbox
# set /Herwig/MatrixElements/Matchbox/Scales/FixedScale:FixedScale 91.2*GeV