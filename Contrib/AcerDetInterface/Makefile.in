# -*- Makefile -*- (for emacs)

#
# This Makefile is intended for compiling Herwig++ plugins
# You can find plugins here: INSERT URL
#
# This Makefile received very little testing, 
# any bug reports are very welcome!
#

# location of include files
THEPEGINCLUDE =
GSLINCLUDE  =
HERWIGINCLUDE =
FC=g77
HEPMCLIBS = 
ACERDETPATH = /home/richardn/montecarlo/fortran/acerdet/AcerDET-1.0
ACERDETINCLUDE = -I$(ACERDETPATH)/acerdet_inc
ACERDETLIB = -L$(ACERDETPATH)/acerdet_lib -lacerdet
CERNPATH = /usr/lib
CERNLIB = -L$(CERNPATH) -lpacklib -lmathlib -lkernlib -lphtools -lnsl -lcrypt -ldl 
INCLUDE = $(THEPEGINCLUDE) $(GSLINCLUDE) $(HERWIGINCLUDE)
#
# C++ flags
# 
CXX = g++
CXXFLAGS = -O2

ALLCCFILES=$(shell echo *.cc)

default : HwAcerDet.so

HwAcerDet.so : AcerDet.cc AcerDet.h  AcerDet_files.o
	$(CXX) -fPIC $(CPPFLAGS) $(INCLUDE) $(CXXFLAGS) -shared \
	AcerDet_files.o AcerDet.cc -o HwAcerDet.so \
	$(ACERDETLIB)  $(CERNLIB) $(HEPMCLIBS) -lHepMCfio -lg2c

AcerDet_files.o: AcerDet_files.f
	$(FC) $(ACERDETINCLUDE) -c -fno-second-underscore AcerDet_files.f 

clean:
	rm -f *.o *.so