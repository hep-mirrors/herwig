################################################
# Set up the handler for the underlying event. 
# 
# UA5 is currently the only choice; 
# it requires the default hadronization model.
################################################

mkdir /Defaults/Handlers/UnderlyingEvent
cd /Defaults/Handlers/UnderlyingEvent

########cuts############
# cut on pt. Without a specific matcher object, it works on all particles
create ThePEG::SimpleKTCut KtCut SimpleKTCut.so
set KtCut:MinKT 2.0

# create the cuts object for the Underlying Event
create ThePEG::Cuts UECuts
# This should always be 2*MinKT!!
set UECuts:MHatMin 4.0
set UECuts:MHatMax 10000000.0

insert UECuts:OneCuts[0] KtCut
#########################

########subprocesses#####
create ThePEG::SubProcessHandler SimpleQCD

#insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEqq2gZ2ff
#insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEqq2W2ff
#insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEGammaGamma
#insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEGammaJet
#insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEHiggs
#insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEHiggsJet
insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEQCD2to2
#insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEHeavyQuark
set SimpleQCD:PartonExtractor /Defaults/Handlers/QCDExtractor
#########################

library HwMPI.so
create Herwig::MPISampler MPISampler
create Herwig::MPIHandler MPIHandler

# set how to sample the subprocesses
#set MPIHandler:BinStrategy 0

# set the ACDC Sampler
set MPIHandler:Sampler MPISampler

# set the subprocesses
insert MPIHandler:SubProcessHandlers[0] SimpleQCD

# set the cuts object
set MPIHandler:Cuts UECuts
#set MPIHandler:Cuts  /Defaults/Generators/QCDCuts

# set the hadron radius
set MPIHandler:Radius 0.71
# set the algorithm
set MPIHandler:Jmueo 1
