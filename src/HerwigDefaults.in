# Make all the directories in the Repository we need
mkdir /Defaults
mkdir /Defaults/Matchers
mkdir /Defaults/Particles
mkdir /Defaults/MatrixElements
mkdir /Defaults/Partons
mkdir /Defaults/Handlers
mkdir /Defaults/Generators
mkdir /Defaults/Handlers/Shower
mkdir /Defaults/Handlers/Hadronization/Cluster

create ThePEG::Matcher<Lepton> /Defaults/Matchers/MatchLepton
create ThePEG::Matcher<LightQuark> /Defaults/Matchers/MatchLightQuark
create ThePEG::Matcher<LightAntiQuark> /Defaults/Matchers/MatchLightAntiQuark
read ThePEGParticles.in
read HerwigParticles.in

# Make some default things
create ThePEG::ThePEGStrategy /Defaults/ThePEGStrategy ThePEGStrategy.so
create ThePEG::StandardRandom /Defaults/Random
create ThePEG::StandardModelBase /Defaults/StandardModel
create ThePEG::O1AlphaS /Defaults/AlphaS O1AlphaS.so
set /Defaults/StandardModel:QCD/RunningAlphaS /Defaults/AlphaS
create ThePEG::SimpleAlphaEM /Defaults/AlphaEM SimpleAlphaEM.so
set /Defaults/StandardModel:EW/RunningAlphaEM /Defaults/AlphaEM
create ThePEG::StandardCKM /Defaults/CKM StandardCKM.so
set /Defaults/StandardModel:EW/CKM /Defaults/CKM
create ThePEG::ACDCSampler /Defaults/ACDCSampler ACDCSampler.so
set /Defaults/ACDCSampler:Margin  1.1
# Create NoPDF and RemnantHandlers
cd /Defaults/Partons
create ThePEG::NoRemnants NoRemnants
create Herwig++::BaryonRemnants BaryonRemnants MRST.so
create ThePEG::LeptonLeptonRemnant LeptonRemnants LeptonLeptonRemnant.so
create ThePEG::NoPDF NoPDF
set NoPDF:RemnantHandler NoRemnants

# Make particle extractors
cd /Defaults/Handlers
create ThePEG::PartonExtractor StandardExtractor
set StandardExtractor:NoPDF /Defaults/Partons/NoPDF
set StandardExtractor:FlatSHatY 1
create ThePEG::PartonExtractor EEExtractor
set EEExtractor:NoPDF /Defaults/Partons/NoPDF
cp StandardExtractor QCDExtractor

# Setup matrix elements
cd /Defaults/MatrixElements
create ThePEG::MEee2gZ2qq MEee2gZ2qq MEee2gZ2qq.so
create ThePEG::MEGG2GG MEGG2GG libThePEGMEQCD.so
create ThePEG::MEQG2QG MEQG2QG
create ThePEG::MEQQ2GG MEQQ2GG
create ThePEG::MEQQ2QQ MEQQ2QQ
create ThePEG::MEQq2Qq MEQq2Qq
create ThePEG::MEGG2QQ MEGG2QQ
create ThePEG::MEQQ2qq MEQQ2qq
create ThePEG::MEqq2qq MEqq2qq
set MEGG2QQ:MaxFlavour 4
set MEQQ2qq:MaxFlavour 4

# Setup the Subprocesses
cd /Defaults/Handlers

# For e+e-
create ThePEG::SubProcessHandler EE2QQ
insert EE2QQ:MatrixElements[0] /Defaults/MatrixElements/MEee2gZ2qq
set EE2QQ:PartonExtractor EEExtractor

# For p+p+
create ThePEG::SubProcessHandler SimpleQCD
insert SimpleQCD:MatrixElements[0] /Defaults/MatrixElements/MEGG2GG
insert SimpleQCD:MatrixElements[1] /Defaults/MatrixElements/MEQG2QG
insert SimpleQCD:MatrixElements[2] /Defaults/MatrixElements/MEQQ2QQ
insert SimpleQCD:MatrixElements[3] /Defaults/MatrixElements/MEQq2Qq
insert SimpleQCD:MatrixElements[4] /Defaults/MatrixElements/MEGG2QQ
insert SimpleQCD:MatrixElements[5] /Defaults/MatrixElements/MEQQ2qq
insert SimpleQCD:MatrixElements[6] /Defaults/MatrixElements/MEqq2qq
insert SimpleQCD:MatrixElements[7] /Defaults/MatrixElements/MEQQ2GG
set SimpleQCD:PartonExtractor QCDExtractor

cd /Defaults
# Create here the Herwig++ specific stuff
create Herwig++::GlobalParameters theGlobalParameters GlobalParameters.so
read Shower.in
read Hadronization.in
create Herwig++::HwDecayHandler /Defaults/Handlers/PartonicDecayHandler

cd /Defaults/Partons

# Handle leptons
create ThePEG::LeptonLeptonPDF LeptonPDF LeptonLeptonPDF.so
set LeptonPDF:RemnantHandler LeptonRemnants
set /Defaults/Particles/e-:PDF LeptonPDF
set /Defaults/Particles/e+:PDF LeptonPDF

# Handle hadrons
library MRST.so
create Herwig++::PDF::MRST MRST
create Herwig++::PDF::MRST99_1 MRSTData
set MRST:Data MRSTData
set MRST:RemnantHandler BaryonRemnants
library GRVBase.so
create ThePEG::GRV94L GRV94L GRV94L.so
create ThePEG::GRV94M GRV94M GRV94M.so
set GRV94L:RemnantHandler BaryonRemnants
set GRV94M:RemnantHandler BaryonRemnants
#set /Defaults/Particles/p+:PDF MRST
#set /Defaults/Particles/pbar-:PDF MRST
set /Defaults/Particles/p+:PDF GRV94L
set /Defaults/Particles/pbar-:PDF GRV94L

# Set some particle properties
set /Defaults/Particles/g:DefaultSpin 3
set /Defaults/Particles/g:Spin 3
set /Defaults/Particles/gamma:DefaultSpin 3
set /Defaults/Particles/gamma:Spin 3
set /Defaults/Particles/Z0:DefaultSpin 3
set /Defaults/Particles/Z0:Spin 3
set /Defaults/Particles/W+:DefaultSpin 3
set /Defaults/Particles/W+:Spin 3
set /Defaults/Particles/W-:DefaultSpin 3
set /Defaults/Particles/W-:Spin 3
set /Defaults/Particles/h0:DefaultSpin 1
set /Defaults/Particles/h0:Spin 1

insert /Defaults/ThePEGStrategy:LocalParticles[0] /Defaults/Particles/p+
insert /Defaults/ThePEGStrategy:LocalParticles[0] /Defaults/Particles/pbar-
insert /Defaults/ThePEGStrategy:LocalParticles[0] /Defaults/Particles/e-
insert /Defaults/ThePEGStrategy:LocalParticles[0] /Defaults/Particles/e+

cd /Defaults/Handlers
# Create LEPHandler
create ThePEG::EventHandler LEPHandler
create ThePEG::FixedCMSLuminosity FixedLEPLuminosity FixedCMSLuminosity.so
set FixedLEPLuminosity:Energy 91.2
set LEPHandler:LuminosityFunction FixedLEPLuminosity
insert LEPHandler:SubProcessHandlers[0] /Defaults/Handlers/EE2QQ
set LEPHandler:BeamA /Defaults/Particles/e-
set LEPHandler:BeamB /Defaults/Particles/e+
set LEPHandler:Sampler /Defaults/ACDCSampler
set LEPHandler:CascadeHandler /Defaults/Handlers/Shower/stdShowerHandler
#set LEPHandler:HadronizationHandler /Defaults/Handlers/Hadronization/Cluster/stdCluHadHandler
#set LEPHandler:DecayHandler /Defaults/Handlers/PartonicDecayHandler

# Create LHCHandler
create ThePEG::EventHandler LHCHandler
create ThePEG::FixedCMSLuminosity FixedLHCLuminosity
set FixedLHCLuminosity:Energy 14000.0
set LHCHandler:LuminosityFunction FixedLHCLuminosity
insert LHCHandler:SubProcessHandlers[0] /Defaults/Handlers/SimpleQCD
set LHCHandler:BeamA /Defaults/Particles/p+
set LHCHandler:BeamB /Defaults/Particles/p+
set LHCHandler:Sampler /Defaults/ACDCSampler
set LHCHandler:CascadeHandler /Defaults/Handlers/Shower/stdShowerHandler
#set LHCHandler:HadronizationHandler /Defaults/Handlers/Hadronization/Cluster/stdCluHadHandler
#set LHCHandler:DecayHandler /Defaults/Handlers/PartonicDecayHandler

# Now the LEPGenerator
cd /Defaults/Generators
create ThePEG::FullEventGenerator LEPGenerator
set LEPGenerator:RandomNumberGenerator /Defaults/Random
set LEPGenerator:StandardModelParameters /Defaults/StandardModel
set LEPGenerator:EventHandler /Defaults/Handlers/LEPHandler
create ThePEG::KinematicalCuts EECuts
set EECuts:LeptonMatcher /Defaults/Matchers/MatchLepton
set EECuts:SubProcess/MHatMin 22.36
set LEPGenerator:EventHandler:Cuts EECuts

# And the LHCGenerator
create ThePEG::FullEventGenerator LHCGenerator
set LHCGenerator:RandomNumberGenerator /Defaults/Random
set LHCGenerator:StandardModelParameters /Defaults/StandardModel
set LHCGenerator:EventHandler /Defaults/Handlers/LHCHandler
create ThePEG::KinematicalCuts QCDCuts
set QCDCuts:LeptonMatcher /Defaults/Matchers/MatchLepton
set QCDCuts:SubProcess/ScaleMin 1.0*GeV
set QCDCuts:SubProcess/PTHatMin 1.0*GeV
set QCDCuts:Collision/X1Min 0.00001
set QCDCuts:Collision/X2Min 0.00001
set LHCGenerator:EventHandler:Cuts QCDCuts

# This will read in all the standard hadron decay modes and add
# the new particles that are used in HERWIG 6.4, but not in ThePEG
read Decays.in
#

#cd /


