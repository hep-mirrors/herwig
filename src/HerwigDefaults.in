# Make all the directories in the Repository we need
mkdir /Defaults
mkdir /Defaults/Matchers
mkdir /Defaults/Particles
mkdir /Defaults/Partons
mkdir /Defaults/Handlers
mkdir /Defaults/Generators

# uncomment if required
read ThePEGParticles.in
read HerwigParticles.in
# for new Decayer structure
# read Particles.in

# Make some default things
create ThePEG::ThePEGStrategy /Defaults/ThePEGStrategy ThePEGStrategy.so
create ThePEG::StandardRandom /Defaults/Random
read Model.in
create ThePEG::ACDCSampler /Defaults/ACDCSampler ACDCSampler.so
set /Defaults/ACDCSampler:Margin  1.1
# Create NoPDF and RemnantHandlers
cd /Defaults/Partons
create ThePEG::NoRemnants NoRemnants
create Herwig++::BaryonRemnants BaryonRemnants HwMRST.so
create ThePEG::LeptonLeptonRemnant LeptonRemnants LeptonLeptonRemnant.so
create ThePEG::NoPDF NoPDF
set NoPDF:RemnantHandler NoRemnants

# Make particle extractors
cd /Defaults/Handlers
##create ThePEG::PartonExtractor StandardExtractor
create Herwig::PartonExtractor StandardExtractor
set StandardExtractor:NoPDF /Defaults/Partons/NoPDF
set StandardExtractor:FlatSHatY 1
create ThePEG::PartonExtractor EEExtractor
set EEExtractor:NoPDF /Defaults/Partons/NoPDF
cp StandardExtractor QCDExtractor

# create the matrix elements
read MatrixElements.in

# Create here the Herwig++ specific stuff
cd /Defaults
# create the shower stuff
read Shower.in
# create the hadronization stuff
read Hadronization.in
# create the decays and decay handler
read Decays.in
# create the PDFs
read PDF.in
# create the QED stuff
read QED.in

# Set some particle properties

insert /Defaults/ThePEGStrategy:LocalParticles[0] /Defaults/Particles/p+
insert /Defaults/ThePEGStrategy:LocalParticles[0] /Defaults/Particles/pbar-
insert /Defaults/ThePEGStrategy:LocalParticles[0] /Defaults/Particles/e-
insert /Defaults/ThePEGStrategy:LocalParticles[0] /Defaults/Particles/e+

cd /Defaults/Handlers
# Create LEPHandler
create ThePEG::StandardEventHandler LEPHandler 
create ThePEG::FixedCMSLuminosity FixedLEPLuminosity FixedCMSLuminosity.so
set FixedLEPLuminosity:Energy 91.2
set LEPHandler:LuminosityFunction FixedLEPLuminosity
insert LEPHandler:SubProcessHandlers[0] /Defaults/Handlers/EE2QQ
set LEPHandler:BeamA /Defaults/Particles/e-
set LEPHandler:BeamB /Defaults/Particles/e+
set LEPHandler:Sampler /Defaults/ACDCSampler
set LEPHandler:CascadeHandler /Defaults/Handlers/Shower/stdShowerHandler
set LEPHandler:HadronizationHandler /Defaults/Handlers/Hadronization/Cluster/stdCluHadHandler
set LEPHandler:DecayHandler /Defaults/Handlers/DecayHandler
# uncomment to get QED radiation off Z decay products in hard process
#insert LEPHandler:PostSubProcessHandlers[0] /Defaults/Handlers/QED/QEDRadiationHandler


# Create LHCHandler
create ThePEG::StandardEventHandler LHCHandler 
create ThePEG::FixedCMSLuminosity FixedLHCLuminosity
set FixedLHCLuminosity:Energy 14000.0
set LHCHandler:LuminosityFunction FixedLHCLuminosity
insert LHCHandler:SubProcessHandlers[0] /Defaults/Handlers/SimpleQCD
set LHCHandler:BeamA /Defaults/Particles/p+
set LHCHandler:BeamB /Defaults/Particles/p+
set LHCHandler:Sampler /Defaults/ACDCSampler
set LHCHandler:BinStrategy 2
set LHCHandler:CascadeHandler /Defaults/Handlers/Shower/stdShowerHandler
set LHCHandler:HadronizationHandler /Defaults/Handlers/Hadronization/Cluster/stdCluHadHandler
set LHCHandler:DecayHandler /Defaults/Handlers/DecayHandler
# uncomment to get QED radiation off W/Z decay products in hard process
#insert LHCHandler:PostSubProcessHandlers[0] /Defaults/Handlers/QED/QEDRadiationHandler

#Set the cuts on the hard process
cd /Defaults/Generators
read Cuts.in

# Now the LEPGenerator
create ThePEG::EventGenerator LEPGenerator
set LEPGenerator:RandomNumberGenerator /Defaults/Random
set LEPGenerator:StandardModelParameters /Defaults/Model
set LEPGenerator:EventHandler /Defaults/Handlers/LEPHandler
set LEPGenerator:EventHandler:Cuts EECuts

# And the LHCGenerator
create ThePEG::EventGenerator LHCGenerator
set LHCGenerator:RandomNumberGenerator /Defaults/Random
set LHCGenerator:StandardModelParameters /Defaults/Model
set LHCGenerator:EventHandler /Defaults/Handlers/LHCHandler
set LHCGenerator:EventHandler:Cuts QCDCuts


# include some default analysis handlers
read Analysis.in
