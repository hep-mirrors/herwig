############################################################
# Setup of default parton shower
#
# Useful switches for users are marked near the top of 
# this file.
#
# Don't edit this file directly, but reset the switches
# in your own input files!
############################################################
mkdir /Defaults/Handlers/Shower
cd /Defaults/Handlers/Shower
library HwMPI.so
library HwMPIPDF.so
library HwShower.so

#####################################
# initial setup, don't change these!
#####################################
create Herwig::SplittingGenerator theSplittingGenerator
create Herwig::ShowerAlphaQCD theShowerAlphaQCD
create Herwig::ShowerAlphaQED theShowerAlphaQED
create Herwig::ShowerHandler stdShowerHandler
create Herwig::Evolver theEvolver
create Herwig::QTildeModel theShowerModel
create Herwig::QTildeFinder thePartnerFinder
create Herwig::QTildeReconstructor theKinematicsReconstructor

set stdShowerHandler:MPIHandler /Defaults/Handlers/UnderlyingEvent/MPIHandler
set stdShowerHandler:MPI On
set stdShowerHandler:OrderSecondaries Yes
set stdShowerHandler:RemDecayer /Defaults/Partons/RemnantDecayer

#
set stdShowerHandler:Evolver theEvolver
set theShowerModel:PartnerFinder thePartnerFinder
set theShowerModel:KinematicsReconstructor theKinematicsReconstructor
set theEvolver:ShowerModel theShowerModel
set theEvolver:SplittingGenerator theSplittingGenerator

#############################################################
# Main control switches for the parton shower.
#
# Read this as a 2x3 matrix with FSR/ISR being the rows 
# and QCD/QED/EWK as columns. The switches allow detailed
# control over whole rows and columns or individual entries.
#############################################################

# These switch a whole row on and off:
set theSplittingGenerator:ISR On
set theSplittingGenerator:FSR On

# These switch a whole column on and off (QED and EWK are not implemented):
set theSplittingGenerator:QCDinteractions On
set theSplittingGenerator:QEDinteractions Off
set theSplittingGenerator:EWKinteractions Off

# These switches are for each entry individually.
# If their column or row is Off, they are not considered.
set theSplittingGenerator:ISR_QCD On
set theSplittingGenerator:ISR_QED On
set theSplittingGenerator:ISR_EWK On

set theSplittingGenerator:FSR_QCD On
set theSplittingGenerator:FSR_QED On
set theSplittingGenerator:FSR_EWK On
#
#############################################################


#############################################################
# End of interesting user servicable section.
#
# Anything that follows below should only be touched if you 
# know what you're doing. 
#
# Really.
#############################################################

#

#

#

#

#

#
#  create the matrix element corrections
# 
# vector boson decay
create Herwig::VectorBosonQQBarMECorrection qqbarg
insert theShowerModel:MECorrections 0 qqbarg
set qqbarg:Coupling theShowerAlphaQCD

# top decay
create Herwig::TopDecayMECorrection TopME
insert theShowerModel:MECorrections 1  TopME
set TopME:Coupling theShowerAlphaQCD

# drell-yan
create Herwig::DrellYanMECorrection DrellYan
insert theShowerModel:MECorrections 2  DrellYan
set DrellYan:Coupling theShowerAlphaQCD
#
# a few default values
set theEvolver:MECorrMode 1
set theShowerAlphaQCD:ScaleFactor 1.0
set theShowerAlphaQED:ScaleFactor 1.0
set theShowerAlphaQCD:NPAlphaS 2
set theShowerAlphaQCD:Qmin 0.935
set theShowerAlphaQCD:NumberOfLoops 3
set theShowerAlphaQCD:InputOption 1
set theShowerAlphaQCD:AlphaMZ 0.127
set theEvolver:GenerateIntrinsicpT 1
# Recommended: 2.2 GeV for Tevatron W/Z production.
# For LHC W/Z production:Iptrms = 5.7GeV. 
# This value was obtained by assuming a linear correlation between Iptrms and ln(shat/S) 
set theEvolver:Iptrms 2.2*GeV
set theEvolver:Beta  0
set theEvolver:Gamma 0*GeV
#
#
# Lets set up all the splittings
create Herwig::QtoQGSplitFn theQtoQGSplitFn
create Herwig::GtoQQbarSplitFn theGtoQQbarSplitFn
create Herwig::GtoGGSplitFn theGtoGGSplitFn
create Herwig::QtoQGammaSplitFn theQtoQGammaSplitFn
create Herwig::QtoGQSplitFn theQtoGQSplitFn
#
# Now the Sudakovs
create Herwig::QTildeSudakov QtoQGSudakov
set QtoQGSudakov:SplittingFunction theQtoQGSplitFn
set QtoQGSudakov:Alpha theShowerAlphaQCD
set QtoQGSudakov:PDFmax 1.9
set QtoQGSudakov:cutoffKinScale 3.00*GeV
set QtoQGSudakov:CutoffQCDMassScale 0.75*GeV
set QtoQGSudakov:CutoffQEDMassScale 0.75*GeV
set QtoQGSudakov:CutoffEWKMassScale 91.0*GeV

create Herwig::QTildeSudakov GtoGGSudakov
set GtoGGSudakov:SplittingFunction theGtoGGSplitFn
set GtoGGSudakov:Alpha theShowerAlphaQCD
set GtoGGSudakov:PDFmax 1.0
set GtoGGSudakov:cutoffKinScale 3.00*GeV
set GtoGGSudakov:CutoffQCDMassScale 0.75*GeV
set GtoGGSudakov:CutoffQEDMassScale 0.75*GeV
set GtoGGSudakov:CutoffEWKMassScale 91.0*GeV

create Herwig::QTildeSudakov GtoQQbarSudakov
set GtoQQbarSudakov:SplittingFunction theGtoQQbarSplitFn
set GtoQQbarSudakov:Alpha theShowerAlphaQCD
set GtoQQbarSudakov:PDFmax 120.0
set GtoQQbarSudakov:cutoffKinScale 3.00*GeV
set GtoQQbarSudakov:CutoffQCDMassScale 0.75*GeV
set GtoQQbarSudakov:CutoffQEDMassScale 0.75*GeV
set GtoQQbarSudakov:CutoffEWKMassScale 91.0*GeV

create Herwig::QTildeSudakov GtobbbarSudakov
set GtobbbarSudakov:SplittingFunction theGtoQQbarSplitFn
set GtobbbarSudakov:Alpha theShowerAlphaQCD
set GtobbbarSudakov:PDFmax 4000.0
set GtobbbarSudakov:cutoffKinScale 3.00*GeV
set GtobbbarSudakov:CutoffQCDMassScale 0.75*GeV
set GtobbbarSudakov:CutoffQEDMassScale 0.75*GeV
set GtobbbarSudakov:CutoffEWKMassScale 91.0*GeV

create Herwig::QTildeSudakov GtoccbarSudakov
set GtoccbarSudakov:SplittingFunction theGtoQQbarSplitFn
set GtoccbarSudakov:Alpha theShowerAlphaQCD
set GtoccbarSudakov:PDFmax 2000.0
set GtoccbarSudakov:cutoffKinScale 3.00*GeV
set GtoccbarSudakov:CutoffQCDMassScale 0.75*GeV
set GtoccbarSudakov:CutoffQEDMassScale 0.75*GeV
set GtoccbarSudakov:CutoffEWKMassScale 91.0*GeV

create Herwig::QTildeSudakov QtoQGammaSudakov
set QtoQGammaSudakov:SplittingFunction theQtoQGammaSplitFn
set QtoQGammaSudakov:Alpha theShowerAlphaQED
set QtoQGammaSudakov:PDFmax 1.0
set QtoQGammaSudakov:cutoffKinScale 3.00*GeV
set QtoQGammaSudakov:CutoffQCDMassScale 0.75*GeV
set QtoQGammaSudakov:CutoffQEDMassScale 0.75*GeV
set QtoQGammaSudakov:CutoffEWKMassScale 91.0*GeV

create Herwig::QTildeSudakov QtoGQSudakov
set QtoGQSudakov:SplittingFunction theQtoGQSplitFn
set QtoGQSudakov:Alpha theShowerAlphaQCD
set QtoGQSudakov:PDFmax 1.0
set QtoGQSudakov:cutoffKinScale 3.00*GeV
set QtoGQSudakov:CutoffQCDMassScale 0.75*GeV
set QtoGQSudakov:CutoffQEDMassScale 0.75*GeV
set QtoGQSudakov:CutoffEWKMassScale 91.0*GeV

create Herwig::QTildeSudakov utoGuSudakov
set utoGuSudakov:SplittingFunction theQtoGQSplitFn
set utoGuSudakov:Alpha theShowerAlphaQCD
set utoGuSudakov:PDFFactor OverOneMinusZ
set utoGuSudakov:PDFmax 5.0
set utoGuSudakov:cutoffKinScale 3.00*GeV
set utoGuSudakov:CutoffQCDMassScale 0.75*GeV
set utoGuSudakov:CutoffQEDMassScale 0.75*GeV
set utoGuSudakov:CutoffEWKMassScale 91.0*GeV

create Herwig::QTildeSudakov dtoGdSudakov
set dtoGdSudakov:SplittingFunction theQtoGQSplitFn
set dtoGdSudakov:Alpha theShowerAlphaQCD
set dtoGdSudakov:PDFFactor OverOneMinusZ
set dtoGdSudakov:PDFmax 1.0
set dtoGdSudakov:cutoffKinScale 3.00*GeV
set dtoGdSudakov:CutoffQCDMassScale 0.75*GeV
set dtoGdSudakov:CutoffQEDMassScale 0.75*GeV
set dtoGdSudakov:CutoffEWKMassScale 91.0*GeV


#
# Now add the final splittings
#
set theSplittingGenerator:AddFinalSplitting u->u,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting d->d,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting s->s,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting c->c,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting b->b,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting t->t,g; QtoQGSudakov
#
set theSplittingGenerator:AddFinalSplitting g->g,g; GtoGGSudakov
#
set theSplittingGenerator:AddFinalSplitting g->u,ubar; GtoQQbarSudakov
set theSplittingGenerator:AddFinalSplitting g->d,dbar; GtoQQbarSudakov
set theSplittingGenerator:AddFinalSplitting g->s,sbar; GtoQQbarSudakov
set theSplittingGenerator:AddFinalSplitting g->c,cbar; GtoccbarSudakov
set theSplittingGenerator:AddFinalSplitting g->b,bbar; GtobbbarSudakov
set theSplittingGenerator:AddFinalSplitting g->t,tbar; GtoQQbarSudakov
#
set theSplittingGenerator:AddFinalSplitting u->u,gamma; QtoQGammaSudakov
set theSplittingGenerator:AddFinalSplitting d->d,gamma; QtoQGammaSudakov
set theSplittingGenerator:AddFinalSplitting s->s,gamma; QtoQGammaSudakov
set theSplittingGenerator:AddFinalSplitting c->c,gamma; QtoQGammaSudakov
set theSplittingGenerator:AddFinalSplitting b->b,gamma; QtoQGammaSudakov
set theSplittingGenerator:AddFinalSplitting t->t,gamma; QtoQGammaSudakov
#
# Now lets add the initial splittings. Remember the form a->b,c; means
# that particle a is the particle given and we backward branch to
# particle b which is initial state and particle c which is final state
#
set theSplittingGenerator:AddInitialSplitting u->u,g; QtoQGSudakov
set theSplittingGenerator:AddInitialSplitting d->d,g; QtoQGSudakov
set theSplittingGenerator:AddInitialSplitting s->s,g; QtoQGSudakov
set theSplittingGenerator:AddInitialSplitting c->c,g; QtoQGSudakov
set theSplittingGenerator:AddInitialSplitting b->b,g; QtoQGSudakov
set theSplittingGenerator:AddInitialSplitting t->t,g; QtoQGSudakov
#
set theSplittingGenerator:AddInitialSplitting g->g,g; GtoGGSudakov
#
set theSplittingGenerator:AddInitialSplitting g->d,dbar; GtoQQbarSudakov
set theSplittingGenerator:AddInitialSplitting g->u,ubar; GtoQQbarSudakov
set theSplittingGenerator:AddInitialSplitting g->s,sbar; GtoQQbarSudakov
set theSplittingGenerator:AddInitialSplitting g->c,cbar; GtoccbarSudakov
set theSplittingGenerator:AddInitialSplitting g->b,bbar; GtobbbarSudakov
set theSplittingGenerator:AddInitialSplitting g->t,tbar; GtoQQbarSudakov
#
set theSplittingGenerator:AddInitialSplitting d->g,d; dtoGdSudakov
set theSplittingGenerator:AddInitialSplitting u->g,u; utoGuSudakov
set theSplittingGenerator:AddInitialSplitting s->g,s; QtoGQSudakov
set theSplittingGenerator:AddInitialSplitting c->g,c; QtoGQSudakov
set theSplittingGenerator:AddInitialSplitting b->g,b; QtoGQSudakov
set theSplittingGenerator:AddInitialSplitting t->g,t; QtoGQSudakov
set theSplittingGenerator:AddInitialSplitting dbar->g,dbar; dtoGdSudakov
set theSplittingGenerator:AddInitialSplitting ubar->g,ubar; utoGuSudakov
set theSplittingGenerator:AddInitialSplitting sbar->g,sbar; QtoGQSudakov
set theSplittingGenerator:AddInitialSplitting cbar->g,cbar; QtoGQSudakov
set theSplittingGenerator:AddInitialSplitting bbar->g,bbar; QtoGQSudakov
set theSplittingGenerator:AddInitialSplitting tbar->g,tbar; QtoGQSudakov
#
#set theSplittingGenerator:AddInitialSplitting u->u,gamma; QtoQGammaSudakov
#set theSplittingGenerator:AddInitialSplitting d->d,gamma; QtoQGammaSudakov
#set theSplittingGenerator:AddInitialSplitting s->s,gamma; QtoQGammaSudakov
#set theSplittingGenerator:AddInitialSplitting c->c,gamma; QtoQGammaSudakov
#set theSplittingGenerator:AddInitialSplitting b->b,gamma; QtoQGammaSudakov
#set theSplittingGenerator:AddInitialSplitting t->t,gamma; QtoQGammaSudakov
