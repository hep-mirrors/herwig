

cd /Herwig/Partons
create ThePEG::LHAPDF PDFSet ThePEGLHAPDF.so
set PDFSet:RemnantHandler HadronRemnants
set /Herwig/Partons/PDFSet:PDFName NNPDF30_nlo_as_0118_mc
set /Herwig/Particles/p+:PDF PDFSet
set /Herwig/Particles/pbar-:PDF PDFSet

set /Herwig/DipoleShower/Kinematics/FFLightKinematics:IRCutoff  0.78
set /Herwig/DipoleShower/Kinematics/FILightKinematics:IRCutoff  0.78
set /Herwig/DipoleShower/Kinematics/IFLightKinematics:IRCutoff  0.78
set /Herwig/DipoleShower/Kinematics/IILightKinematics:IRCutoff  0.78

set /Herwig/Model:QCD/RunningAlphaS /Herwig/Couplings/NLOAlphaS
set /Herwig/DipoleShower/DipoleShowerHandler:GlobalAlphaS /Herwig/Couplings/NLOAlphaS
set /Herwig/DipoleShower/DipoleShowerHandler:GlobalAlphaS:input_alpha_s 0.118
set /Herwig/Couplings/NLOAlphaS:input_alpha_s 0.118

read Matchbox/FiveFlavourNoBMassScheme.in


cd /Herwig/Particles

set d:NominalMass 0*GeV
set dbar:NominalMass 0*GeV
set u:NominalMass 0*GeV
set ubar:NominalMass 0*GeV
set s:NominalMass 0*GeV
set sbar:NominalMass 0*GeV
set c:NominalMass 0*GeV
set cbar:NominalMass 0*GeV

set c:HardProcessMass 0*GeV
set cbar:HardProcessMass 0*GeV
set b:HardProcessMass 0*GeV
set bbar:HardProcessMass 0*GeV

set e+:HardProcessMass 0*GeV
set e-:HardProcessMass 0*GeV
set mu+:HardProcessMass 0*GeV
set mu-:HardProcessMass 0*GeV

set nu_e:HardProcessMass 0*GeV
set nu_ebar:HardProcessMass 0*GeV
set nu_mu:HardProcessMass 0*GeV
set nu_mubar:HardProcessMass 0*GeV
set nu_tau:HardProcessMass 0*GeV
set nu_taubar:HardProcessMass 0*GeV




cd /Herwig/Cuts
set MassCut:MinM 66*GeV
set MassCut:MaxM 116*GeV
get QCDCuts:X1Min
set /Herwig/Generators/LHCGenerator:EventHandler:CollisionCuts Off


cd /Herwig/MatrixElements/Matchbox/Phasespace

set TreePhasespace:M0 0.01*GeV
set TreePhasespace:MC 0.0001*GeV



set /Herwig/Generators/LHCGenerator:MaxErrors 10000
cd /Herwig/EventHandlers

set /Herwig/EventHandlers/LHCHandler:LuminosityFunction:Energy 7000.0*GeV
set /Herwig/Generators/LHCGenerator:NumberOfEvents 100000000
cd /Herwig/Merging
insert /Herwig/Generators/LHCGenerator:EventHandler:SubProcessHandlers[0] PPMFactory




clear PPMFactory:ParticleGroup p
do PPMFactory:StartParticleGroup p
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/g
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/u
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/ubar
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/d
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/dbar
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/s
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/sbar
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/c
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/cbar
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/b
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/bbar
do PPMFactory:EndParticleGroup

clear PPMFactory:ParticleGroup j
do PPMFactory:StartParticleGroup j
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/g
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/u
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/ubar
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/d
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/dbar
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/s
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/sbar
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/c
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/cbar
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/b
insert PPMFactory:ParticleGroup 0 /Herwig/Particles/bbar
do PPMFactory:EndParticleGroup








cd /Herwig/Merging
create Herwig::Merger Merger

create ColorFull::TraceBasis LargeNColourBasis
set LargeNColourBasis:LargeN On
set Merger:LargeNBasis LargeNColourBasis

set Merger:DipoleShowerHandler /Herwig/DipoleShower/DipoleShowerHandler
set /Herwig/DipoleShower/DipoleShowerHandler:MergingHelper Merger



cd /Herwig/Generators
set LHCGenerator:EventHandler:CascadeHandler /Herwig/DipoleShower/DipoleShowerHandler

set LHCGenerator:EventHandler:CascadeHandler:MPIHandler NULL
set LHCGenerator:EventHandler:MultipleInteractionHandler NULL
set LHCGenerator:EventHandler:DecayHandler NULL
set LHCGenerator:EventHandler:HadronizationHandler NULL
erase /Herwig/Generators/LHCGenerator:EventHandler:PostSubProcessHandlers[0]



create Herwig::MonacoSampler /Herwig/Samplers/Monaco

set /Herwig/Samplers/Sampler:BinSampler /Herwig/Samplers/Monaco
cd /Herwig/MatrixElements/Matchbox/Phasespace

set TreePhasespace:M0 0.01*GeV
set TreePhasespace:MC 0.0001*GeV
set /Herwig/Merging/PPMFactory:Phasespace TreePhasespace


cd /Herwig/EventHandlers


set LHCHandler:Sampler  /Herwig/Samplers/Sampler

cd /Herwig/Samplers


set Monaco:EnhancementFactor 1.2
set Monaco:InitialPoints 10000
set Monaco:LuminosityMapperBins 8
set Monaco:NIterations 4
set Monaco:RemapChannelDimension Yes
set Monaco:RemapperMinSelection 0.0001
set Monaco:RemapperPoints 10000
set Monaco:UseAllIterations No

set Sampler:UpdateAfter 1000
set Sampler:AddUpSamplers Off
set Sampler:GlobalMaximumWeight Off
set Sampler:FlatSubprocesses Off
set Sampler:MinSelection 0.000001
set Sampler:AlmostUnweighted On
set Sampler:BinSampler:Kappa 0.001
set Sampler:RunCombinationData Off
set Sampler:Verbose On








cd /Herwig/MatrixElements/Matchbox/Amplitudes

#clear /Herwig/Merging/PPMFactory:Amplitudes

#set GenericProcesses:TreeLevelAmplitude MadGraph
#set GenericProcesses:OneLoopAmplitude OpenLoops






cd /Herwig/Cuts
set MassCut:MinM 66*GeV
set MassCut:MaxM 116*GeV

set /Herwig/Generators/LHCGenerator:MaxErrors 10000
cd /Herwig/EventHandlers

set /Herwig/EventHandlers/LHCHandler:LuminosityFunction:Energy 7000.0*GeV



cd /Herwig/MatrixElements/Matchbox/Scales/
set  /Herwig/Merging/MScale:ScaleChoice LeptonPairMassScale



cd /Herwig/Generators
set LHCGenerator:EventHandler:DecayHandler NULL
set LHCGenerator:EventHandler:HadronizationHandler NULL





cd /Herwig/Analysis
clear /Herwig/Generators/LHCGenerator:AnalysisHandlers

create ThePEG::RivetAnalysis Rivet RivetAnalysis.so
insert /Herwig/Generators/LHCGenerator:AnalysisHandlers 0 Rivet


insert /Herwig/Analysis/Rivet:Analyses 0 MC_ZJETS
insert /Herwig/Analysis/Rivet:Analyses 0 MC_ZINC
insert /Herwig/Analysis/Rivet:Analyses 0 MC_WJETS
insert /Herwig/Analysis/Rivet:Analyses 0 MC_WJETS
insert /Herwig/Analysis/Rivet:Analyses 0 MC_XS
insert /Herwig/Analysis/Rivet:Analyses 0 ATLAS_2011_I945498
insert /Herwig/Analysis/Rivet:Analyses 0 ATLAS_2011_S9131140
insert /Herwig/Analysis/Rivet:Analyses 0 CMS_2013_I1224539_ZJET
insert /Herwig/Analysis/Rivet:Analyses 0 MC_ZKTSPLITTINGS
insert /Herwig/Analysis/Rivet:Analyses 0 CMS_2013_I1258128
insert /Herwig/Analysis/Rivet:Analyses 0 ATLAS_2013_I1230812_EL
insert /Herwig/Analysis/Rivet:Analyses 0 ATLAS_2012_I1204784
insert /Herwig/Analysis/Rivet:Analyses 0 ATLAS_2014_I1319490
insert /Herwig/Analysis/Rivet:Analyses 0 ATLAS_2011_I925932
insert /Herwig/Analysis/Rivet:Analyses 0 ATLAS_2013_I1217867
insert /Herwig/Analysis/Rivet:Analyses 0 CMS_2014_I1303894


cd /Herwig/Generators
set /Herwig/Generators/LHCGenerator:IntermediateOutput Yes 
set /Herwig/Generators/LHCGenerator:EventHandler /Herwig/EventHandlers/LHCHandler
set /Herwig/DipoleShower/DipoleShowerHandler:MaxPtIsMuF Yes 


cd /Herwig/Cuts

create ThePEG::Cuts Cuts
set Cuts:Fuzzy FuzzyTheta
set MatchboxJetMatcher:Factory /Herwig/Merging/PPMFactory
cd /Herwig/Merging
set PPMFactory:MergingHelper Merger
set Merger:MFactory PPMFactory
set MScale:MergingHelper Merger
set Merger:MergingJetFinder /Herwig/Cuts/JetFinder


cd /Herwig/Generators
set LHCGenerator:DebugLevel 1
set LHCGenerator:PrintEvent 10
set /Herwig/DipoleShower/DipoleShowerHandler:MergingHelper:minusL No
