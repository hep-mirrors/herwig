mkdir /Defaults/NewPhysics
create /Herwig/UEDBase /Defaults/NewPhysics/MUED HwUED.so
cd /Defaults/NewPhysics
# Need to reset SM interfaces to new model
# SM couplings
set MUED:QCD/RunningAlphaS /Defaults/AlphaS
set MUED:EW/RunningAlphaEM /Defaults/AlphaEM
set MUED:EW/CKM /Defaults/CKM
set MUED:RunningMass /Defaults/RunningMass
# SM vertices
set MUED:Vertex/FFZ /Defaults/Vertices/FFZVertex
set MUED:Vertex/FFW /Defaults/Vertices/FFWVertex
set MUED:Vertex/FFH /Defaults/Vertices/FFHVertex
set MUED:Vertex/FFG /Defaults/Vertices/FFGVertex
set MUED:Vertex/FFP /Defaults/Vertices/FFPVertex
set MUED:Vertex/GGG /Defaults/Vertices/GGGVertex
set MUED:Vertex/GGGG /Defaults/Vertices/GGGGVertex
set MUED:Vertex/WWH /Defaults/Vertices/WWHVertex
set MUED:Vertex/WWW /Defaults/Vertices/WWWVertex
set MUED:Vertex/WWWW /Defaults/Vertices/WWWWVertex
set MUED:Vertex/HGG /Defaults/Vertices/HGGVertex
set MUED:Vertex/HPP /Defaults/Vertices/HPPVertex
# MUED Feynman rules
set MUED:Vertex/F1F1Z /Defaults/Vertices/BSM/UED_F1F1Z
set MUED:Vertex/F1F1P /Defaults/Vertices/BSM/UED_F1F1P
set MUED:Vertex/F1F1W /Defaults/Vertices/BSM/UED_F1F1W
set MUED:Vertex/F1F1G0 /Defaults/Vertices/BSM/UED_F1F1G0
set MUED:Vertex/F1F0G1 /Defaults/Vertices/BSM/UED_F1F0G1
set MUED:Vertex/F1F0W1 /Defaults/Vertices/BSM/UED_F1F0W1
set MUED:Vertex/G1G1G0 /Defaults/Vertices/BSM/UED_G1G1G0
set MUED:Vertex/G0G0G1G1 /Defaults/Vertices/BSM/UED_G0G0G1G1
set MUED:Vertex/P0H1H1 /Defaults/Vertices/BSM/UED_P0H1H1
set MUED:Vertex/Z0H1H1 /Defaults/Vertices/BSM/UED_Z0H1H1
set MUED:Vertex/W0A1H1 /Defaults/Vertices/BSM/UED_W0A1H1
set MUED:Vertex/Z0A1h1 /Defaults/Vertices/BSM/UED_Z0A1h1
set MUED:Vertex/W0W1W1 /Defaults/Vertices/BSM/UED_W0W1W1
# Set up the shower
cd /Defaults/Handlers/Shower
insert stdShowerHandler:DecayInShower 0 5100001
insert stdShowerHandler:DecayInShower 1 5100002
insert stdShowerHandler:DecayInShower 2 5100003
insert stdShowerHandler:DecayInShower 3 5100004
insert stdShowerHandler:DecayInShower 4 5100005
insert stdShowerHandler:DecayInShower 5 5100006
insert stdShowerHandler:DecayInShower 6 5100011
insert stdShowerHandler:DecayInShower 7 5100012
insert stdShowerHandler:DecayInShower 8 5100013
insert stdShowerHandler:DecayInShower 9 5100014
insert stdShowerHandler:DecayInShower 10 5100015
insert stdShowerHandler:DecayInShower 11 5100016
insert stdShowerHandler:DecayInShower 12 6100001
insert stdShowerHandler:DecayInShower 13 6100002
insert stdShowerHandler:DecayInShower 14 6100003
insert stdShowerHandler:DecayInShower 15 6100004
insert stdShowerHandler:DecayInShower 16 6100005
insert stdShowerHandler:DecayInShower 17 6100006
insert stdShowerHandler:DecayInShower 18 6100011
insert stdShowerHandler:DecayInShower 19 6100013
insert stdShowerHandler:DecayInShower 20 6100015
insert stdShowerHandler:DecayInShower 21 5100021
insert stdShowerHandler:DecayInShower 22 5100022
insert stdShowerHandler:DecayInShower 23 5100023
insert stdShowerHandler:DecayInShower 24 5100024
insert stdShowerHandler:DecayInShower 25 5100025
insert stdShowerHandler:DecayInShower 26 5100036
insert stdShowerHandler:DecayInShower 27 5100037
set theSplittingGenerator:AddFinalSplitting KK1_u_L->KK1_u_L,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_d_L->KK1_d_L,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_s_L->KK1_s_L,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_c_L->KK1_c_L,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_b_1->KK1_b_1,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_t_1->KK1_t_1,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_u_R->KK1_u_R,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_d_R->KK1_d_R,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_s_R->KK1_s_R,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_c_R->KK1_c_R,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_b_2->KK1_b_2,g; QtoQGSudakov
set theSplittingGenerator:AddFinalSplitting KK1_t_2->KK1_t_2,g; QtoQGSudakov

cd /Defaults/Handlers
insert LHCHandler:PreCascadeHandlers 0 NewModelDecayHandler

# Set up the bsm framework
cd /Defaults/NewPhysics
set NewModel:HardProcessConstructor HPConstructor
set NewModel:DecayConstructor DecayConstructor
insert DecayConstructor:NBodyDecayConstructors[0] TwoBodyDC
set MUED:ModelGenerator NewModel

# The UED parameters (these are the default)
set MUED:InverseRadius 500.*GeV
set MUED:LambdaR 20
set MUED:RadiativeCorrections No

set HPConstructor:IncludeEW No
set HPConstructor:DebugME Yes

insert HPConstructor:Incoming 0 /Defaults/Particles/g
insert HPConstructor:Incoming 1 /Defaults/Particles/u
insert HPConstructor:Incoming 2 /Defaults/Particles/ubar
insert HPConstructor:Incoming 3 /Defaults/Particles/d
insert HPConstructor:Incoming 4 /Defaults/Particles/dbar

insert HPConstructor:Outgoing 0 /Defaults/Particles/KK1_u_L
insert HPConstructor:Outgoing 1 /Defaults/Particles/KK1_u_Lbar
insert HPConstructor:Outgoing 2 /Defaults/Particles/KK1_d_L
insert HPConstructor:Outgoing 3 /Defaults/Particles/KK1_d_Lbar
insert HPConstructor:Outgoing 4 /Defaults/Particles/KK1_u_R
insert HPConstructor:Outgoing 5 /Defaults/Particles/KK1_u_Rbar
insert HPConstructor:Outgoing 6 /Defaults/Particles/KK1_d_R
insert HPConstructor:Outgoing 7 /Defaults/Particles/KK1_d_Rbar
insert HPConstructor:Outgoing 8 /Defaults/Particles/KK1_g


cd /Defaults/Handlers
set LHCHandler:CascadeHandler NULL
set LHCHandler:HadronizationHandler NULL
cd /Defaults/Handlers/Shower
set stdShowerHandler:MPI Off

cd /Defaults/Handlers/Analysis
set Basics:CheckCharge No
set Basics:CheckQuark No

cd /Defaults/Generators
# Choose MUED over SM
set LHCGenerator:StandardModelParameters  /Defaults/NewPhysics/MUED

# Other parameters for run
set LHCGenerator:NumberOfEvents 10000000
set LHCGenerator:RandomNumberGenerator:Seed 31122001
set LHCGenerator:DebugLevel 1
set LHCGenerator:PrintEvent 10
set LHCGenerator:MaxErrors 10000

saverun mued-check LHCGenerator
