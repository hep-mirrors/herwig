# -*- makefile -*-
SRCDIR = @BUILDDIR@

CXX = @CXX@

CXXFLAGS = -ansi -pedantic -Wall 

###CXXOPTFLAG = -O
CXXOPTFLAG =

CXXDLFLAGS = -shared

CXXDEBUGFLAG = -g

CXXEXT = -fpic

DEFS =

AR = @AR@

ARFLAGS = @ARFLAGS@

RANLIB = @RANLIB@

CLHEPPATH = @CLHEPPATH@

CLHEPLIB = @CLHEPLIB@

THEPEGPATH = @THEPEGPATH@

THEPEGLIB = @THEPEGLIB@

INCLUDES = -I$(SRCDIR)/.. -I$(THEPEGPATH)/include -I$(CLHEPPATH)/include

DLLIB = -ldl

LIBS = -L$(THEPEGPATH)/lib/ThePEG/current $(THEPEGLIB) -L$(CLHEPPATH)/lib $(CLHEPLIB) -lm $(DLLIB)

LINKFLAGS = -rdynamic

RPATH = $(SRCDIR)/lib:$(THEPEGPATH)/lib/ThePEG/current

all: depend lib

.cc.o:
	$(CXX) -c $(CXXFLAGS) $(CXXEXT) $(CXXDEBUGFLAG) $(CXXOPTFLAG) $(DEFS) $(INCLUDES) $<
	@ln -f -s `pwd`/$@ $(SRCDIR)/lib

%.so: %.o
	@rm -f $(SRCDIR)/lib/$<
	$(CXX) $(CXXFLAGS) $(CXXDEBUGFLAG) $(CXXOPTFLAG) $(CXXDLFLAGS) $< -o $@
	@ln -f -s `pwd`/$@ $(SRCDIR)/lib

.cc.s:
	$(CXX) -S $(CXXFLAGS) $(CXXOPTFLAG) $(DEFS) $(INCLUDES) $(CXXEXT) $<

depend:
	$(SRCDIR)/Config/g++dep $(INCLUDES) $(SOURCES) $(CHECKSOURCES)

lib: $(OBJECTS)

assembler: $(DOTSS)

tags: *cc *h
	ctags --c++ --language=c++ --ignore-indentation --members --typedefs-and-c++ --no-warn --update $?

tagsfile:
	ctags --c++ --language=c++ --ignore-indentation --members --typedefs-and-c++ --no-warn  *cc *h

clean:
	rm -f $(CHECKPROGS) $(PROGS) $(LIBRARIES) *.o *.so a.out 


